import{d as Ae,v as Ue,r as w,x as Se,c as F,a as s,b as t,w as o,u as a,f as Ee,o as k,e as n,i as Ne,g as L,F as ae,y as oe,z as Ve,A as De,h as P,B as Me,C as Ie,t as c,n as m,D as je,_ as Le}from"./xwqOR6O6.js";import{c as ze,_ as Te,a as Fe,b as Pe}from"./FWDhT1Qz.js";import{_ as Be}from"./DuRK4C2V.js";import{_ as Oe,a as Re,b as Ge,c as qe,d as He,e as Je}from"./IvlsLNxC.js";import{_ as We}from"./yL3wwHe6.js";import{_ as Ze,a as Ke,b as Qe}from"./CotQzYPW.js";import{_ as Xe}from"./CbqaeOHe.js";import{_ as Ye}from"./D2P5kewB.js";import{_ as et}from"./BcUF11S_.js";import{_ as tt}from"./Dheb4U_G.js";import{_ as st}from"./BuJNjf1Y.js";import{_ as at,a as ot,b as lt,c as rt,d as nt,e as it,f as dt,g as ut}from"./Dlxo0yk-.js";const mt={class:"p-6"},pt={class:"flex justify-between items-center mb-6"},ct={class:"flex justify-end gap-2"},ft={class:"flex flex-col items-center justify-center gap-2 text-muted-foreground"},gt={class:"font-medium"},vt={class:"flex items-center gap-2"},xt={class:"flex justify-end gap-2"},bt={class:"grid grid-cols-1 md:grid-cols-[250px_1fr] gap-6 py-4"},_t={class:"flex flex-col items-center gap-4"},wt={class:"flex flex-col items-center gap-2 w-full"},yt={class:"w-full mt-4"},kt={class:"w-full border rounded-md overflow-hidden grid grid-cols-2"},Ct={class:"w-full mt-4"},ht={class:"w-full border rounded-md overflow-hidden grid grid-cols-1 gap-1 p-1"},$t={class:"space-y-6"},At={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ut={class:"grid gap-2"},St={class:"grid gap-2"},Et={class:"grid gap-2 md:col-span-2"},Nt={class:"grid gap-2"},Vt={class:"flex justify-between items-center"},Dt={class:"mt-2 bg-muted/50 p-3 rounded-md"},Mt={class:"grid grid-cols-2 gap-x-6 gap-y-1"},It={class:"mr-1 text-xs"},jt={class:"mr-1 text-xs"},Lt={class:"mr-1 text-xs"},zt={class:"mr-1 text-xs"},Tt={class:"mr-1 text-xs"},Ft={class:"flex gap-2"},Pt={class:"grid grid-cols-1 md:grid-cols-[250px_1fr] gap-6 py-4"},Bt={class:"flex flex-col items-center gap-4"},Ot={class:"flex flex-col items-center gap-2 w-full"},Rt={class:"w-full mt-4"},Gt={class:"w-full border rounded-md overflow-hidden grid grid-cols-2"},qt={class:"w-full mt-4"},Ht={class:"w-full border rounded-md overflow-hidden grid grid-cols-1 gap-1 p-1"},Jt={class:"space-y-6"},Wt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Zt={class:"grid gap-2"},Kt={class:"grid gap-2"},Qt={class:"grid gap-2 md:col-span-2"},Xt={class:"grid gap-2"},Yt={class:"flex justify-between items-center"},es={key:0,class:"mt-2 bg-muted/50 p-3 rounded-md"},ts={class:"grid grid-cols-2 gap-x-6 gap-y-1"},ss={class:"mr-1 text-xs"},as={class:"mr-1 text-xs"},os={class:"mr-1 text-xs"},ls={class:"mr-1 text-xs"},rs={class:"mr-1 text-xs"},ns={class:"text-xs text-muted-foreground"},is={class:"flex gap-2"},ks=Ae({__name:"users",setup(ds){const{toast:g}=Ue(),E=w([]),N=w(!0),V=w(!1),D=w(!1),M=w(!1),_=w(null),C=w(null),u=w({hasMinLength:!1,hasUppercase:!1,hasLowercase:!1,hasNumbers:!1,hasSpecialChars:!1,isValid:!1}),U=w(!1),A=w(null),l=w({name:"",email:"",password:"",bio:"",avatar:"",status:1,role:"cliente"});function B(){l.value={name:"",email:"",password:"",bio:"",avatar:"",status:1,role:"cliente"},A.value=null,I(l.value.password)}function I(i){u.value={hasMinLength:i.length>=12,hasUppercase:/[A-Z]/.test(i),hasLowercase:/[a-z]/.test(i),hasNumbers:/\d/.test(i),hasSpecialChars:/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/.test(i),isValid:!1},u.value.isValid=u.value.hasMinLength&&u.value.hasUppercase&&u.value.hasLowercase&&u.value.hasNumbers&&u.value.hasSpecialChars}function q(){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZ",e="abcdefghijklmnopqrstuvwxyz",d="0123456789",p="!@#$%^&*()_+-=[]{}|;:,.<>?",v=i+e+d+p;let f="";f+=i.charAt(Math.floor(Math.random()*i.length)),f+=e.charAt(Math.floor(Math.random()*e.length)),f+=d.charAt(Math.floor(Math.random()*d.length)),f+=p.charAt(Math.floor(Math.random()*p.length));for(let b=f.length;b<12;b++)f+=v.charAt(Math.floor(Math.random()*v.length));f=f.split("").sort(()=>.5-Math.random()).join(""),l.value.password=f,I(f)}async function H(i){var p;const e=i.target;if(!e.files||e.files.length===0)return;const d=e.files[0];if(!d.type.startsWith("image/")){g({title:"Erro",description:"O arquivo deve ser uma imagem",variant:"destructive"});return}try{U.value=!0;const v=new FileReader;v.readAsDataURL(d),v.onload=async()=>{var f;try{const b=v.result;A.value=b;const y=await $fetch("/api/upload/avatar",{method:"POST",body:{imageData:b}});l.value.avatar=y.avatarUrl,g({title:"Sucesso",description:"Avatar enviado com sucesso"})}catch(b){console.error("Erro ao processar imagem:",b),g({title:"Erro",description:((f=b==null?void 0:b.data)==null?void 0:f.message)||"Não foi possível processar a imagem",variant:"destructive"})}finally{U.value=!1}},v.onerror=()=>{g({title:"Erro",description:"Erro ao ler o arquivo",variant:"destructive"}),U.value=!1}}catch(v){console.error("Erro ao fazer upload do avatar:",v),g({title:"Erro",description:((p=v==null?void 0:v.data)==null?void 0:p.message)||"Não foi possível fazer o upload da imagem",variant:"destructive"}),U.value=!1}}async function j(){N.value=!0;try{const i=await $fetch("/api/users");E.value=i}catch(i){console.error("Erro ao buscar usuários:",i),g({title:"Erro",description:"Não foi possível carregar os usuários",variant:"destructive"})}finally{N.value=!1}}async function le(){var i;if(!u.value.isValid){g({title:"Erro",description:"A senha não atende aos requisitos de segurança",variant:"destructive"});return}try{await $fetch("/api/users/create",{method:"POST",body:l.value}),g({title:"Sucesso",description:"Usuário criado com sucesso"}),V.value=!1,B(),await j()}catch(e){console.error("Erro ao criar usuário:",e);let d="Não foi possível criar o usuário";(i=e==null?void 0:e.data)!=null&&i.message&&(d=e.data.message,d.includes("email já está em uso")?d="Este email já está cadastrado para outro usuário":d.includes("nome já está em uso")&&(d="Este nome já está cadastrado para outro usuário")),g({title:"Erro",description:d,variant:"destructive"})}}function z(i){switch(i){case"admin":return{icon:"lucide:shield",color:"text-purple-600",badge:"bg-purple-100 dark:bg-purple-950/30 border-purple-200 dark:border-purple-800/60",label:"Administrador"};case"funcionario":return{icon:"lucide:briefcase",color:"text-blue-600",badge:"bg-blue-100 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800/60",label:"Funcionário"};default:return{icon:"lucide:user",color:"text-green-600",badge:"bg-green-100 dark:bg-green-950/30 border-green-200 dark:border-green-800/60",label:"Cliente"}}}function re(i){_.value=i,l.value={name:i.name,email:i.email,password:"",bio:i.bio||"",avatar:i.avatar||"",status:i.status,role:i.role},C.value={...l.value},A.value=i.avatar,I(l.value.password),D.value=!0}function ne(){return!_.value||!C.value||l.value.password&&!u.value.isValid?!1:l.value.name!==C.value.name||l.value.email!==C.value.email||l.value.bio!==C.value.bio||l.value.status!==C.value.status||l.value.avatar!==C.value.avatar||l.value.role!==C.value.role||l.value.password.length>0}async function ie(){var i;if(_.value)try{const e={name:l.value.name,email:l.value.email,bio:l.value.bio||null,avatar:l.value.avatar||null,status:l.value.status===1?1:0,role:l.value.role};l.value.password&&(e.password=l.value.password),N.value=!0;const d=await $fetch(`/api/users/${_.value.id}`,{method:"PATCH",body:e});D.value=!1,B(),await j(),g({title:"Sucesso",description:"Usuário atualizado com sucesso"})}catch(e){console.error("Erro ao atualizar usuário:",e);let d="Não foi possível atualizar o usuário";(i=e==null?void 0:e.data)!=null&&i.message&&(d=e.data.message,d.includes("email já está em uso")?d="Este email já está cadastrado para outro usuário":d.includes("nome já está em uso")&&(d="Este nome já está cadastrado para outro usuário")),g({title:"Erro",description:d,variant:"destructive"})}finally{N.value=!1}}function de(i){_.value=i,M.value=!0}async function ue(){var i;if(_.value)try{await $fetch(`/api/users/${_.value.id}`,{method:"DELETE"}),g({title:"Sucesso",description:"Usuário excluído com sucesso"}),M.value=!1,_.value=null,await j()}catch(e){console.error("Erro ao excluir usuário:",e),g({title:"Erro",description:((i=e==null?void 0:e.data)==null?void 0:i.message)||"Não foi possível excluir o usuário",variant:"destructive"})}}function J(i){return new Date(i).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}async function me(i){var e;try{const d=i.id,p=i.status===1?0:1;console.error("Status a ser enviado:",{userId:d,oldStatus:i.status,newStatus:p});const v=await $fetch(`/api/users/${d}`,{method:"PATCH",body:{status:p}});E.value=E.value.map(f=>f.id===d?{...f,status:p}:f),g({title:"Sucesso",description:"Status do usuário atualizado com sucesso"})}catch(d){console.error("Erro ao alterar status do usuário:",d),g({title:"Erro",description:((e=d==null?void 0:d.data)==null?void 0:e.message)||"Não foi possível alterar o status do usuário",variant:"destructive"}),await j()}}return Se(()=>{j()}),(i,e)=>{const d=Ne,p=Ee,v=Fe,f=Be,b=Te,y=qe,T=Ge,pe=Re,h=Ve,x=Je,O=Me,R=Ie,G=De,ce=We,fe=He,ge=Oe,ve=Pe,xe=ze,W=Qe,Z=je,K=Ye,S=et,$=Le,Q=tt,X=st,Y=Xe,ee=Ke,te=Ze,be=rt,_e=nt,we=lt,ye=dt,ke=ut,Ce=it,he=ot,$e=at;return k(),F("div",mt,[s("div",pt,[e[28]||(e[28]=s("h1",{class:"text-2xl font-bold"},"Gerenciamento de Usuários",-1)),t(p,{onClick:e[0]||(e[0]=r=>{V.value=!0,B()}),class:"bg-primary hover:bg-primary/90"},{default:o(()=>[t(d,{name:"lucide:plus-circle",class:"mr-2 h-4 w-4"}),e[27]||(e[27]=n(" Novo Usuário "))]),_:1})]),t(xe,{class:"border shadow-sm"},{default:o(()=>[t(b,{class:"pb-0"},{default:o(()=>[t(v,{class:"text-xl"},{default:o(()=>e[29]||(e[29]=[n("Usuários")])),_:1}),t(f,null,{default:o(()=>e[30]||(e[30]=[n("Visualize e gerencie todos os usuários do sistema")])),_:1})]),_:1}),t(ve,{class:"p-0"},{default:o(()=>[t(ge,null,{default:o(()=>[t(pe,{class:"bg-muted/50"},{default:o(()=>[t(T,null,{default:o(()=>[t(y,{class:"w-14"},{default:o(()=>e[31]||(e[31]=[n("Avatar")])),_:1}),t(y,null,{default:o(()=>e[32]||(e[32]=[n("Nome")])),_:1}),t(y,null,{default:o(()=>e[33]||(e[33]=[n("Email")])),_:1}),t(y,null,{default:o(()=>e[34]||(e[34]=[n("Data de Criação")])),_:1}),t(y,null,{default:o(()=>e[35]||(e[35]=[n("Status")])),_:1}),t(y,null,{default:o(()=>e[36]||(e[36]=[n("Função")])),_:1}),t(y,{class:"text-right"},{default:o(()=>e[37]||(e[37]=[n("Ações")])),_:1})]),_:1})]),_:1}),t(fe,null,{default:o(()=>[a(N)?(k(),F(ae,{key:0},oe(5,r=>t(T,{key:r},{default:o(()=>[t(x,null,{default:o(()=>[t(h,{class:"h-10 w-10 rounded-full"})]),_:1}),t(x,null,{default:o(()=>[t(h,{class:"h-5 w-[250px]"})]),_:1}),t(x,null,{default:o(()=>[t(h,{class:"h-5 w-[180px]"})]),_:1}),t(x,null,{default:o(()=>[t(h,{class:"h-5 w-[150px]"})]),_:1}),t(x,null,{default:o(()=>[t(h,{class:"h-5 w-[80px]"})]),_:1}),t(x,null,{default:o(()=>[t(h,{class:"h-5 w-[100px]"})]),_:1}),t(x,{class:"text-right"},{default:o(()=>[s("div",ct,[t(h,{class:"h-8 w-8 rounded"}),t(h,{class:"h-8 w-8 rounded"})])]),_:1})]),_:2},1024)),64)):a(E).length===0?(k(),L(T,{key:1},{default:o(()=>[t(x,{colspan:"7",class:"h-24 text-center"},{default:o(()=>[s("div",ft,[t(d,{name:"lucide:users-x",class:"h-8 w-8"}),e[38]||(e[38]=s("p",null,"Nenhum usuário encontrado.",-1))])]),_:1})]),_:1})):(k(!0),F(ae,{key:2},oe(a(E),r=>(k(),L(T,{key:r.id,class:"hover:bg-muted/30 transition-colors"},{default:o(()=>[t(x,{class:"text-center"},{default:o(()=>[t(G,{size:"sm",shape:"circle",class:"border-2 border-muted mx-auto"},{default:o(()=>[r.avatar?(k(),L(O,{key:0,src:r.avatar},null,8,["src"])):P("",!0),t(R,{class:"bg-primary/10 text-primary"},{default:o(()=>[n(c(r.name.charAt(0).toUpperCase()),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(x,null,{default:o(()=>[s("div",gt,c(r.name),1)]),_:2},1024),t(x,{class:"text-muted-foreground"},{default:o(()=>[n(c(r.email),1)]),_:2},1024),t(x,{class:"text-muted-foreground text-sm"},{default:o(()=>[n(c(J(r.createdAt)),1)]),_:2},1024),t(x,null,{default:o(()=>[s("div",vt,[t(ce,{checked:r.status===1,"onUpdate:checked":se=>me(r),class:"data-[state=checked]:bg-green-500 data-[state=unchecked]:bg-gray-200"},null,8,["checked","onUpdate:checked"]),s("span",{class:m(["text-xs font-medium",r.status===1?"text-green-600":"text-red-600"])},c(r.status===1?"Ativo":"Inativo"),3)])]),_:2},1024),t(x,null,{default:o(()=>[s("div",{class:m(["inline-flex items-center px-2.5 py-1 rounded-full border text-xs font-medium",[z(r.role).badge,z(r.role).color]])},[t(d,{name:z(r.role).icon,class:"h-3.5 w-3.5 mr-1"},null,8,["name"]),n(" "+c(z(r.role).label),1)],2)]),_:2},1024),t(x,{class:"text-right"},{default:o(()=>[s("div",xt,[t(p,{variant:"ghost",size:"icon",onClick:se=>re(r),class:"h-8 w-8 text-muted-foreground hover:text-primary"},{default:o(()=>[t(d,{name:"lucide:pencil",class:"h-4 w-4"}),e[39]||(e[39]=s("span",{class:"sr-only"},"Editar",-1))]),_:2},1032,["onClick"]),t(p,{variant:"ghost",size:"icon",onClick:se=>de(r),class:"h-8 w-8 text-muted-foreground hover:text-destructive"},{default:o(()=>[t(d,{name:"lucide:trash-2",class:"h-4 w-4"}),e[40]||(e[40]=s("span",{class:"sr-only"},"Excluir",-1))]),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),t(te,{open:a(V),"onUpdate:open":e[12]||(e[12]=r=>V.value=r)},{default:o(()=>[t(ee,{class:"sm:max-w-[800px]"},{default:o(()=>[t(K,null,{default:o(()=>[t(W,null,{default:o(()=>e[41]||(e[41]=[n("Adicionar Novo Usuário")])),_:1}),t(Z,null,{default:o(()=>e[42]||(e[42]=[n(" Preencha os campos abaixo para criar um novo usuário. ")])),_:1})]),_:1}),s("div",bt,[s("div",_t,[t(G,{size:"lg",class:"w-40 h-40 border-2 border-muted"},{default:o(()=>[a(A)?(k(),L(O,{key:0,src:a(A)},null,8,["src"])):P("",!0),t(R,{class:"text-4xl"},{default:o(()=>[n(c(a(l).name?a(l).name.charAt(0).toUpperCase():"U"),1)]),_:1})]),_:1}),s("div",wt,[e[43]||(e[43]=s("label",{for:"new-avatar-upload",class:"bg-primary text-primary-foreground hover:bg-primary/90 inline-flex h-9 items-center justify-center rounded-md px-4 py-2 text-sm font-medium cursor-pointer w-full text-center"}," Selecionar Imagem ",-1)),t(S,{id:"new-avatar-upload",type:"file",accept:"image/*",class:"hidden",onChange:H,disabled:a(U)},null,8,["disabled"]),e[44]||(e[44]=s("p",{class:"text-xs text-muted-foreground"},"JPG, PNG ou GIF. Máximo 5MB.",-1))]),s("div",yt,[e[47]||(e[47]=s("div",{class:"text-sm font-medium mb-3 text-muted-foreground"},"STATUS",-1)),s("div",kt,[s("button",{type:"button",class:m(["py-2 px-4 text-center text-sm font-medium transition-colors",a(l).status===1?"bg-green-500/20 text-green-700":"bg-background hover:bg-muted/30 border-r"]),onClick:e[1]||(e[1]=r=>a(l).status=1)},e[45]||(e[45]=[s("div",{class:"flex items-center justify-center gap-2"},[s("div",{class:"w-2 h-2 rounded-full bg-green-500"}),n(" Ativo ")],-1)]),2),s("button",{type:"button",class:m(["py-2 px-4 text-center text-sm font-medium transition-colors",a(l).status===0?"bg-red-500/10 text-red-700":"bg-background hover:bg-muted/30"]),onClick:e[2]||(e[2]=r=>a(l).status=0)},e[46]||(e[46]=[s("div",{class:"flex items-center justify-center gap-2"},[s("div",{class:"w-2 h-2 rounded-full bg-red-500"}),n(" Inativo ")],-1)]),2)])]),s("div",Ct,[e[51]||(e[51]=s("div",{class:"text-sm font-medium mb-3 text-muted-foreground"},"FUNÇÃO",-1)),s("div",ht,[s("button",{type:"button",class:m(["py-2 px-4 text-sm font-medium transition-colors rounded flex items-center gap-2",a(l).role==="admin"?"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300":"bg-background hover:bg-muted/30"]),onClick:e[3]||(e[3]=r=>a(l).role="admin")},[t(d,{name:"lucide:shield",class:"h-4 w-4"}),e[48]||(e[48]=n(" Administrador "))],2),s("button",{type:"button",class:m(["py-2 px-4 text-sm font-medium transition-colors rounded flex items-center gap-2",a(l).role==="funcionario"?"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300":"bg-background hover:bg-muted/30"]),onClick:e[4]||(e[4]=r=>a(l).role="funcionario")},[t(d,{name:"lucide:briefcase",class:"h-4 w-4"}),e[49]||(e[49]=n(" Funcionário "))],2),s("button",{type:"button",class:m(["py-2 px-4 text-sm font-medium transition-colors rounded flex items-center gap-2",a(l).role==="cliente"?"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-300":"bg-background hover:bg-muted/30"]),onClick:e[5]||(e[5]=r=>a(l).role="cliente")},[t(d,{name:"lucide:user",class:"h-4 w-4"}),e[50]||(e[50]=n(" Cliente "))],2)])])]),s("div",$t,[s("div",null,[e[55]||(e[55]=s("h3",{class:"text-sm font-medium mb-3 text-muted-foreground"},"INFORMAÇÕES PESSOAIS",-1)),s("div",At,[s("div",Ut,[t($,{for:"name"},{default:o(()=>e[52]||(e[52]=[n("Nome")])),_:1}),t(S,{id:"name",modelValue:a(l).name,"onUpdate:modelValue":e[6]||(e[6]=r=>a(l).name=r),placeholder:"Nome completo"},null,8,["modelValue"])]),s("div",St,[t($,{for:"email"},{default:o(()=>e[53]||(e[53]=[n("Email")])),_:1}),t(S,{id:"email",modelValue:a(l).email,"onUpdate:modelValue":e[7]||(e[7]=r=>a(l).email=r),placeholder:"exemplo@email.com"},null,8,["modelValue"])]),s("div",Et,[t($,{for:"bio"},{default:o(()=>e[54]||(e[54]=[n("Biografia")])),_:1}),t(Q,{id:"bio",modelValue:a(l).bio,"onUpdate:modelValue":e[8]||(e[8]=r=>a(l).bio=r),placeholder:"Uma breve descrição sobre o usuário",rows:"3"},null,8,["modelValue"])])])]),s("div",null,[e[64]||(e[64]=s("h3",{class:"text-sm font-medium mb-3 text-muted-foreground"},"CREDENCIAIS",-1)),s("div",Nt,[s("div",Vt,[t($,{for:"password"},{default:o(()=>e[56]||(e[56]=[n("Senha")])),_:1}),t(p,{variant:"outline",size:"sm",onClick:q,class:"px-2 py-1 h-7 text-xs"},{default:o(()=>e[57]||(e[57]=[n(" Gerar Senha ")])),_:1})]),t(X,{id:"password",modelValue:a(l).password,"onUpdate:modelValue":e[9]||(e[9]=r=>a(l).password=r),placeholder:"********",onInput:e[10]||(e[10]=r=>I(a(l).password))},null,8,["modelValue"]),s("div",Dt,[e[63]||(e[63]=s("div",{class:"text-sm font-medium mb-2"},"Requisitos de senha:",-1)),s("div",Mt,[s("div",{class:m([a(u).hasMinLength?"text-green-500":"text-red-500","text-sm flex items-center"])},[s("span",It,c(a(u).hasMinLength?"✓":"✗"),1),e[58]||(e[58]=n(" Mínimo de 12 caracteres "))],2),s("div",{class:m([a(u).hasUppercase?"text-green-500":"text-red-500","text-sm flex items-center"])},[s("span",jt,c(a(u).hasUppercase?"✓":"✗"),1),e[59]||(e[59]=n(" Letra maiúscula "))],2),s("div",{class:m([a(u).hasLowercase?"text-green-500":"text-red-500","text-sm flex items-center"])},[s("span",Lt,c(a(u).hasLowercase?"✓":"✗"),1),e[60]||(e[60]=n(" Letra minúscula "))],2),s("div",{class:m([a(u).hasNumbers?"text-green-500":"text-red-500","text-sm flex items-center"])},[s("span",zt,c(a(u).hasNumbers?"✓":"✗"),1),e[61]||(e[61]=n(" Número "))],2),s("div",{class:m([a(u).hasSpecialChars?"text-green-500":"text-red-500","text-sm flex items-center"])},[s("span",Tt,c(a(u).hasSpecialChars?"✓":"✗"),1),e[62]||(e[62]=n(" Caractere especial "))],2)])])])])])]),t(Y,{class:"mt-6"},{default:o(()=>[s("div",Ft,[t(p,{variant:"outline",onClick:e[11]||(e[11]=r=>V.value=!1)},{default:o(()=>e[65]||(e[65]=[n("Cancelar")])),_:1}),t(p,{onClick:le,disabled:!a(u).isValid,class:"min-w-24"},{default:o(()=>e[66]||(e[66]=[n(" Salvar ")])),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["open"]),t(te,{open:a(D),"onUpdate:open":e[24]||(e[24]=r=>D.value=r)},{default:o(()=>[t(ee,{class:"sm:max-w-[800px]"},{default:o(()=>[t(K,null,{default:o(()=>[t(W,null,{default:o(()=>e[67]||(e[67]=[n("Editar Usuário")])),_:1}),t(Z,null,{default:o(()=>e[68]||(e[68]=[n(" Altere os campos que deseja atualizar. ")])),_:1})]),_:1}),s("div",Pt,[s("div",Bt,[t(G,{size:"lg",class:"w-40 h-40 border-2 border-muted"},{default:o(()=>[a(A)?(k(),L(O,{key:0,src:a(A)},null,8,["src"])):P("",!0),t(R,{class:"text-4xl"},{default:o(()=>[n(c(a(l).name?a(l).name.charAt(0).toUpperCase():"U"),1)]),_:1})]),_:1}),s("div",Ot,[e[69]||(e[69]=s("label",{for:"avatar-upload",class:"bg-primary text-primary-foreground hover:bg-primary/90 inline-flex h-9 items-center justify-center rounded-md px-4 py-2 text-sm font-medium cursor-pointer w-full text-center"}," Alterar Imagem ",-1)),t(S,{id:"avatar-upload",type:"file",accept:"image/*",class:"hidden",onChange:H,disabled:a(U)},null,8,["disabled"]),e[70]||(e[70]=s("p",{class:"text-xs text-muted-foreground"},"JPG, PNG ou GIF. Máximo 5MB.",-1))]),s("div",Rt,[e[73]||(e[73]=s("div",{class:"text-sm font-medium mb-3 text-muted-foreground"},"STATUS",-1)),s("div",Gt,[s("button",{type:"button",class:m(["py-2 px-4 text-center text-sm font-medium transition-colors",a(l).status===1?"bg-green-500/20 text-green-700":"bg-background hover:bg-muted/30 border-r"]),onClick:e[13]||(e[13]=r=>a(l).status=1)},e[71]||(e[71]=[s("div",{class:"flex items-center justify-center gap-2"},[s("div",{class:"w-2 h-2 rounded-full bg-green-500"}),n(" Ativo ")],-1)]),2),s("button",{type:"button",class:m(["py-2 px-4 text-center text-sm font-medium transition-colors",a(l).status===0?"bg-red-500/10 text-red-700":"bg-background hover:bg-muted/30"]),onClick:e[14]||(e[14]=r=>a(l).status=0)},e[72]||(e[72]=[s("div",{class:"flex items-center justify-center gap-2"},[s("div",{class:"w-2 h-2 rounded-full bg-red-500"}),n(" Inativo ")],-1)]),2)])]),s("div",qt,[e[77]||(e[77]=s("div",{class:"text-sm font-medium mb-3 text-muted-foreground"},"FUNÇÃO",-1)),s("div",Ht,[s("button",{type:"button",class:m(["py-2 px-4 text-sm font-medium transition-colors rounded flex items-center gap-2",a(l).role==="admin"?"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300":"bg-background hover:bg-muted/30"]),onClick:e[15]||(e[15]=r=>a(l).role="admin")},[t(d,{name:"lucide:shield",class:"h-4 w-4"}),e[74]||(e[74]=n(" Administrador "))],2),s("button",{type:"button",class:m(["py-2 px-4 text-sm font-medium transition-colors rounded flex items-center gap-2",a(l).role==="funcionario"?"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300":"bg-background hover:bg-muted/30"]),onClick:e[16]||(e[16]=r=>a(l).role="funcionario")},[t(d,{name:"lucide:briefcase",class:"h-4 w-4"}),e[75]||(e[75]=n(" Funcionário "))],2),s("button",{type:"button",class:m(["py-2 px-4 text-sm font-medium transition-colors rounded flex items-center gap-2",a(l).role==="cliente"?"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-300":"bg-background hover:bg-muted/30"]),onClick:e[17]||(e[17]=r=>a(l).role="cliente")},[t(d,{name:"lucide:user",class:"h-4 w-4"}),e[76]||(e[76]=n(" Cliente "))],2)])])]),s("div",Jt,[s("div",null,[e[81]||(e[81]=s("h3",{class:"text-sm font-medium mb-3 text-muted-foreground"},"INFORMAÇÕES PESSOAIS",-1)),s("div",Wt,[s("div",Zt,[t($,{for:"edit-name"},{default:o(()=>e[78]||(e[78]=[n("Nome")])),_:1}),t(S,{id:"edit-name",modelValue:a(l).name,"onUpdate:modelValue":e[18]||(e[18]=r=>a(l).name=r),placeholder:"Nome completo"},null,8,["modelValue"])]),s("div",Kt,[t($,{for:"edit-email"},{default:o(()=>e[79]||(e[79]=[n("Email")])),_:1}),t(S,{id:"edit-email",modelValue:a(l).email,"onUpdate:modelValue":e[19]||(e[19]=r=>a(l).email=r),placeholder:"exemplo@email.com"},null,8,["modelValue"])]),s("div",Qt,[t($,{for:"edit-bio"},{default:o(()=>e[80]||(e[80]=[n("Biografia")])),_:1}),t(Q,{id:"edit-bio",modelValue:a(l).bio,"onUpdate:modelValue":e[20]||(e[20]=r=>a(l).bio=r),placeholder:"Uma breve descrição sobre o usuário",rows:"3"},null,8,["modelValue"])])])]),s("div",null,[e[90]||(e[90]=s("h3",{class:"text-sm font-medium mb-3 text-muted-foreground"},"CREDENCIAIS",-1)),s("div",Xt,[s("div",Yt,[t($,{for:"edit-password"},{default:o(()=>e[82]||(e[82]=[n("Senha (deixe em branco para manter)")])),_:1}),t(p,{variant:"outline",size:"sm",onClick:q,class:"px-2 py-1 h-7 text-xs"},{default:o(()=>e[83]||(e[83]=[n(" Gerar Senha ")])),_:1})]),t(X,{id:"edit-password",modelValue:a(l).password,"onUpdate:modelValue":e[21]||(e[21]=r=>a(l).password=r),placeholder:"Nova senha",onInput:e[22]||(e[22]=r=>I(a(l).password))},null,8,["modelValue"]),a(l).password?(k(),F("div",es,[e[89]||(e[89]=s("div",{class:"text-sm font-medium mb-2"},"Requisitos de senha:",-1)),s("div",ts,[s("div",{class:m([a(u).hasMinLength?"text-green-500":"text-red-500","text-sm flex items-center"])},[s("span",ss,c(a(u).hasMinLength?"✓":"✗"),1),e[84]||(e[84]=n(" Mínimo de 12 caracteres "))],2),s("div",{class:m([a(u).hasUppercase?"text-green-500":"text-red-500","text-sm flex items-center"])},[s("span",as,c(a(u).hasUppercase?"✓":"✗"),1),e[85]||(e[85]=n(" Letra maiúscula "))],2),s("div",{class:m([a(u).hasLowercase?"text-green-500":"text-red-500","text-sm flex items-center"])},[s("span",os,c(a(u).hasLowercase?"✓":"✗"),1),e[86]||(e[86]=n(" Letra minúscula "))],2),s("div",{class:m([a(u).hasNumbers?"text-green-500":"text-red-500","text-sm flex items-center"])},[s("span",ls,c(a(u).hasNumbers?"✓":"✗"),1),e[87]||(e[87]=n(" Número "))],2),s("div",{class:m([a(u).hasSpecialChars?"text-green-500":"text-red-500","text-sm flex items-center"])},[s("span",rs,c(a(u).hasSpecialChars?"✓":"✗"),1),e[88]||(e[88]=n(" Caractere especial "))],2)])])):P("",!0)])])])]),t(Y,{class:"mt-6 flex items-center justify-between"},{default:o(()=>[s("div",ns," Última atualização: "+c(a(_)?J(a(_).updatedAt):""),1),s("div",is,[t(p,{variant:"outline",onClick:e[23]||(e[23]=r=>D.value=!1)},{default:o(()=>e[91]||(e[91]=[n("Cancelar")])),_:1}),t(p,{onClick:ie,disabled:!ne(),class:"min-w-24"},{default:o(()=>e[92]||(e[92]=[n(" Atualizar ")])),_:1},8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["open"]),t($e,{open:a(M),"onUpdate:open":e[26]||(e[26]=r=>M.value=r)},{default:o(()=>[t(he,null,{default:o(()=>[t(we,null,{default:o(()=>[t(be,null,{default:o(()=>e[93]||(e[93]=[n("Tem certeza?")])),_:1}),t(_e,null,{default:o(()=>{var r;return[n(" Esta ação não pode ser desfeita. Isso excluirá permanentemente o usuário "+c((r=a(_))==null?void 0:r.name)+" e removerá seus dados do sistema. ",1)]}),_:1})]),_:1}),t(Ce,null,{default:o(()=>[t(ye,{onClick:e[25]||(e[25]=r=>M.value=!1)},{default:o(()=>e[94]||(e[94]=[n("Cancelar")])),_:1}),t(ke,{class:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:ue},{default:o(()=>e[95]||(e[95]=[n(" Excluir ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])}}});export{ks as default};
