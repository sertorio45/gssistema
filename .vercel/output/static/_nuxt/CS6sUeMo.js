import{d as W,j as Y,r as c,x as Z,dX as P,c as p,o as m,a as t,b as e,k as ee,n as C,z as se,u as v,w as a,e as i,h as S,G as T,F as ae,y as te,m as I,i as oe,f as le,g as R,t as ne,Q as ie}from"./xwqOR6O6.js";import{t as re,u as ue,_ as de,a as me,b as ce,d as _e,c as fe,F as pe,f as ve}from"./BoBO-dhD.js";import{_ as be}from"./BcUF11S_.js";import{_ as ye}from"./Dheb4U_G.js";import{o as V,c as ge,s as L}from"./BKTptsQI.js";import{_ as M}from"./DlAUqK2U.js";import{_ as he}from"./DNxFJhUf.js";import"./CBcctwmX.js";const we={class:"profile-form-wrapper"},xe={class:"relative mt-6 min-h-[500px]"},ke={class:"space-y-8"},Fe={class:"space-y-2"},$e={class:"space-y-2"},Ce={class:"space-y-2"},Se={class:"flex gap-2"},Te={class:"relative"},Le={key:0,class:"absolute inset-0 flex items-center justify-center bg-background/50"},Ee={class:"relative"},ze={key:0,class:"absolute inset-0 flex items-center justify-center bg-background/50"},Ae={class:"relative"},Be={key:0,class:"absolute inset-0 flex items-center justify-center bg-background/50"},Ue={class:"relative flex items-center"},je=["onClick","disabled"],De={class:"flex justify-start gap-2"},Ne=W({__name:"ProfileForm",setup(q){const l=Y(),o=c(!1),r=c(!1),_=c(!1),b=c(!1);c(["m@example.com","m@google.com","m@support.com"]);const A=c({username:"",email:"",bio:"",avatar:""}),G=c(null),H=re(V({username:L().min(2,{message:"Nome de usuário deve ter pelo menos 2 caracteres."}).max(30,{message:"Nome de usuário não pode ter mais de 30 caracteres."}),email:L({required_error:"Email é obrigatório."}).email("Forneça um email válido."),bio:L().max(160,{message:"Bio não pode ter mais de 160 caracteres."}).min(4,{message:"Bio deve ter pelo menos 4 caracteres."}),urls:ge(V({value:L().url({message:"Forneça uma URL válida."})})).optional()})),{handleSubmit:Q,resetForm:B}=ue({validationSchema:H,initialValues:{username:"",email:"",bio:"",urls:[{value:"https://shadcn.com"},{value:"http://twitter.com/shadcn"}]}});async function U(){if(!b.value)try{b.value=!0,_.value=!1,r.value=!1,l.user||await l.refreshUserData(),l.user&&(A.value={username:l.user.name||"",email:l.user.email||"",bio:l.user.bio||"",avatar:l.user.avatar||""},B({values:{username:l.user.name||"",email:l.user.email||"",bio:l.user.bio||"Conte algo sobre você.",urls:[{value:"https://shadcn.com"},{value:"http://twitter.com/shadcn"}]}}),_.value=!0,await ie(),setTimeout(()=>{r.value=!0,b.value=!1},300))}catch(f){console.error("Erro ao carregar dados do usuário:",f),_.value=!0,r.value=!0,b.value=!1}}let y=null;Z(()=>{setTimeout(()=>{U()},100)}),y&&window.removeEventListener("user-updated",y),y=()=>{b.value||(_.value=!1,r.value=!1,setTimeout(()=>{U()},100))},window.addEventListener("user-updated",y);const j=Q(async f=>{var s;try{if(o.value=!0,(s=l.user)!=null&&s.id){const u=await l.updateProfile(l.user.id,{name:f.username,email:f.email,bio:f.bio});A.value={username:u.name||"",email:u.email||"",bio:u.bio||"",avatar:u.avatar||""},l.syncUserData(),P({title:"Perfil atualizado com sucesso!",description:"As alterações já estão disponíveis em todo o sistema."})}}catch(u){P({title:"Erro ao atualizar perfil",description:(u==null?void 0:u.message)||"Tente novamente mais tarde.",variant:"destructive"})}finally{o.value=!1}});return(f,s)=>{const u=ee,n=se,g=me,E=be,h=ce,w=_e,x=fe,k=de,F=pe,X=ye,D=oe,z=le;return m(),p("div",we,[s[11]||(s[11]=t("div",null,[t("h3",{class:"text-lg font-medium"},"Perfil"),t("p",{class:"text-sm text-muted-foreground"}," Assim é como os outros vão te ver no site. ")],-1)),e(u),t("div",xe,[t("div",{class:C(["skeleton-container",{"opacity-0":r.value,"opacity-100":!r.value}])},[t("div",ke,[t("div",Fe,[e(n,{class:"h-4 w-24"}),e(n,{class:"h-10 w-full"}),e(n,{class:"h-3 w-3/4"})]),t("div",$e,[e(n,{class:"h-4 w-16"}),e(n,{class:"h-10 w-full"}),e(n,{class:"h-3 w-2/4"})]),t("div",Ce,[e(n,{class:"h-4 w-12"}),e(n,{class:"h-24 w-full"}),e(n,{class:"h-3 w-3/5"})]),t("div",Se,[e(n,{class:"h-10 w-32"}),e(n,{class:"h-10 w-32"})])])],2),t("div",{class:C(["form-container",{"opacity-0":!r.value||!_.value,"opacity-100":r.value&&_.value}])},[t("form",{class:"space-y-8",onSubmit:s[0]||(s[0]=(...d)=>v(j)&&v(j)(...d)),ref_key:"form",ref:G},[e(F,{name:"username"},{default:a(({componentField:d})=>[e(k,null,{default:a(()=>[e(g,null,{default:a(()=>s[1]||(s[1]=[i("Nome de usuário")])),_:1}),e(h,null,{default:a(()=>[t("div",Te,[e(E,T({type:"text",placeholder:"usuário"},d,{disabled:o.value}),null,16,["disabled"]),o.value?(m(),p("div",Le,[e(n,{class:"h-5 w-3/4"})])):S("",!0)])]),_:2},1024),e(w,null,{default:a(()=>s[2]||(s[2]=[i(" Este é seu nome de exibição público. Pode ser seu nome real ou um pseudônimo. ")])),_:1}),e(x)]),_:2},1024)]),_:1}),e(F,{name:"email"},{default:a(({componentField:d})=>[e(k,null,{default:a(()=>[e(g,null,{default:a(()=>s[3]||(s[3]=[i("Email")])),_:1}),e(h,null,{default:a(()=>[t("div",Ee,[e(E,T({type:"email",placeholder:"seu@email.com"},d,{disabled:o.value}),null,16,["disabled"]),o.value?(m(),p("div",ze,[e(n,{class:"h-5 w-3/4"})])):S("",!0)])]),_:2},1024),e(w,null,{default:a(()=>s[4]||(s[4]=[i(" Este é o seu email para login e comunicações. ")])),_:1}),e(x)]),_:2},1024)]),_:1}),e(F,{name:"bio"},{default:a(({componentField:d})=>[e(k,null,{default:a(()=>[e(g,null,{default:a(()=>s[5]||(s[5]=[i("Bio")])),_:1}),e(h,null,{default:a(()=>[t("div",Ae,[e(X,T({placeholder:"Conte um pouco sobre você"},d,{disabled:o.value}),null,16,["disabled"]),o.value?(m(),p("div",Be,[e(n,{class:"h-20 w-3/4"})])):S("",!0)])]),_:2},1024),e(w,null,{default:a(()=>s[6]||(s[6]=[i(" Você pode "),t("span",null,"@mencionar",-1),i(" outros usuários e organizações para criar links. ")])),_:1}),e(x)]),_:2},1024)]),_:1}),t("div",null,[e(v(ve),{name:"urls"},{default:a(({fields:d,push:J,remove:K})=>[(m(!0),p(ae,null,te(d,(N,$)=>(m(),p("div",{key:`urls-${N.key}`},[e(F,{name:`urls[${$}].value`},{default:a(({componentField:O})=>[e(k,null,{default:a(()=>[e(g,{class:C(v(I)($!==0&&"sr-only"))},{default:a(()=>s[7]||(s[7]=[i(" URLs ")])),_:2},1032,["class"]),e(w,{class:C(v(I)($!==0&&"sr-only"))},{default:a(()=>s[8]||(s[8]=[i(" Adicione links para seu site, blog ou perfis sociais. ")])),_:2},1032,["class"]),t("div",Ue,[e(h,null,{default:a(()=>[e(E,T({type:"url",ref_for:!0},O,{disabled:o.value}),null,16,["disabled"])]),_:2},1024),t("button",{type:"button",class:"absolute end-0 py-2 pe-3 text-muted-foreground",onClick:Re=>K($),disabled:o.value},[e(D,{name:"i-radix-icons-cross-1",class:"w-3"})],8,je)]),e(x)]),_:2},1024)]),_:2},1032,["name"])]))),128)),e(z,{type:"button",variant:"outline",size:"sm",class:"mt-2 w-20 text-xs",onClick:N=>J({value:""}),disabled:o.value},{default:a(()=>s[9]||(s[9]=[i(" Adicionar URL ")])),_:2},1032,["onClick","disabled"])]),_:1})]),t("div",De,[e(z,{type:"submit",disabled:o.value},{default:a(()=>[o.value?(m(),R(D,{key:0,name:"i-lucide-loader-2",class:"mr-2 h-4 w-4 animate-spin"})):S("",!0),i(" "+ne(o.value?"Atualizando...":"Atualizar perfil"),1)]),_:1},8,["disabled"]),e(z,{type:"button",variant:"outline",onClick:v(B),disabled:o.value},{default:a(()=>s[10]||(s[10]=[i(" Limpar formulário ")])),_:1},8,["onClick","disabled"])])],544)],2)])])}}}),Pe=M(Ne,[["__scopeId","data-v-fe5a9888"]]),Ie={};function Ve(q,l){const o=Pe,r=he;return m(),R(r,null,{default:a(()=>[e(o)]),_:1})}const Oe=M(Ie,[["render",Ve]]);export{Oe as default};
